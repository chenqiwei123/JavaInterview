### 谈谈你对volatile的理解

说到JVM内存模型，我们就需要了解JMM内存模型。JMM内存模型是Java内存模型的子集，
它定义了Java内存模型的一些规则，并提供了一套原子性、可见性、有序性的规则。

**JMM关于同步的规定：**
> 1. 线程解锁前，必须把共享变量的最新值刷新到主内存中。
> 
> 3. 线程加锁时，如果发现共享变量的值没有在主内存中，或者当前线程无法获得锁，就阻塞等待，直到获得锁。
> 
>4. 线程在释放锁时，如果发现共享变量的值已经发生了变化，那么必须把共享变量的最新值从主内存刷新到线程的工作内存中。

每个Java线程都有自己的工作内存。操作数据，首先从主内存中读，得到一份拷贝，操作完毕后再写回到主内存。

![img.png](Image2%2Fimg.png)
JMM可能带来可见性、原子性和有序性问题。所谓可见性，就是某个线程对主内存内容的更改，应该立刻通知到其它线程。原子性是指一个操作是不可分割的，不能执行到一半，就不执行了。所谓有序性，就是指令是有序的，不会被重排。



